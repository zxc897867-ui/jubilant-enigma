<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>房屋資訊自動生成器</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: "微軟正黑體", Arial, sans-serif; margin: 30px; }
    label { display: block; margin: 8px 0 2px; }
    input[type="text"], select, textarea { box-sizing: border-box; }
    input[type="radio"], input[type="checkbox"] { width: auto; margin-right: 4px; vertical-align: middle; }
    .inline-scroll {
      display: block;
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
      width: 100%;
      padding-bottom: 2px;
    }
    .inline-scroll label, .inline-scroll input[type="radio"], .inline-scroll input[type="checkbox"], .inline-scroll input[type="text"] {
      display: inline-block;
      white-space: nowrap;
      margin-right: 8px;
      vertical-align: middle;
    }
    .auto-grow {
      min-width: 120px;
      width: auto;
      max-width: 60vw;
      transition: width 0.2s;
    }
    .square-textarea {
      width: 200px;
      height: 200px;
      resize: both;
      font-size: 16px;
      box-sizing: border-box;
      display: block;
    }
    .small-input { width: 30px; text-align: center; }
    input[type="radio"]:checked, input[type="checkbox"]:checked { accent-color: orange; }
    textarea { margin-top: 10px; width: 100%; font-size: 18px; }
    button { margin: 10px 5px 0 0; padding: 8px 16px; }
    .row { display: flex; gap: 0; align-items: center; }
    .row label, .row input { flex: unset; }
    #date, #today_obj {
      width: 140px;
      max-width: 40vw;
      height: 36px;
      border-radius: 4px;
      font-size: 16px;
      padding: 4px 8px;
      margin-right: 10px;
    }
    .tooltip {
      position: relative;
      display: inline-block;
    }
    .tip-link {
      color: #1976d2;
      text-decoration: underline;
      cursor: pointer;
      font-size: 15px;
    }
    .tip-content {
      display: none;
      position: absolute;
      left: 0;
      top: 24px;
      background: #222;
      color: #fff;
      padding: 10px 14px;
      border-radius: 6px;
      font-size: 15px;
      z-index: 99;
      min-width: 220px;
      max-width: 80vw;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      word-break: break-all;
    }
    .tooltip.show .tip-content {
      display: block;
    }
  </style>
</head>
<body>
  <h2>房屋資訊自動生成器</h2>
  <form id="houseForm" autocomplete="off">
    <!-- 日期 + 今日物件 -->
    <div class="row">
      <label style="min-width:50px;margin-right:4px;">日期</label>
      <input name="date" id="date" readonly>
      <span style="margin-right:4px;">今日物件</span>
      <input name="today_obj" id="today_obj" class="auto-grow" placeholder="可填寫">
    </div>
    <!-- 可否廣告 -->
    <label>可否廣告：
      <div class="inline-scroll">
        <input type="radio" name="ad" value="可刊登">可刊登
        <input type="text" id="ad_yes_text" name="ad_yes_text" class="auto-grow" placeholder="補充說明" style="display:none;" size="8">
        <input type="radio" name="ad" value="不可刊登591可刊登其他平台">不可刊登591可刊登其他平台
        <input type="text" id="ad_no_text" name="ad_no_text" class="auto-grow" placeholder="補充說明" style="display:none;" size="8">
        <input type="radio" name="ad" value="不可刊登">不可刊登
        <input type="text" id="ad_no2_text" name="ad_no2_text" class="auto-grow" placeholder="補充說明" style="display:none;" size="8">
      </div>
    </label>
    <!-- 可否簽委托書 -->
    <label>可否簽委托書：
      <div class="inline-scroll">
        <input type="radio" name="sign" value="可(已簽)">可(已簽)
        <input type="radio" name="sign" value="可(可補簽)">可(可補簽)
        <input type="radio" name="sign" value="不可(可上架廣告)">不可(可上架廣告)
        <input type="radio" name="sign" value="不可" id="sign_no_radio">不可
        <input type="text" id="sign_no_text" name="sign_no_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
      </div>
    </label>
    <!-- 頂加是否為民國84年前增建 -->
    <label>
      頂加是否為民國84年前增建
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">如果是頂加需詢問房東是否為84年前增建，不是的話會有被拆除的風險</span>
      </span>
      ：
      <div class="inline-scroll">
        <input type="radio" name="top" value="是">是
        <input type="radio" name="top" value="否">否
      </div>
    </label>
    <!-- 房號加說明，無選項在空白格後方 -->
    <label>
      房號
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">如為分套/雅房（會有房號、或大門到房間門的路徑怎麼走）方便後續行銷人員帶看</span>
      </span>
      ：<input name="room" class="auto-grow" required>
      <input type="radio" name="room_none" value="無">無
    </label>
    <!-- 總樓層加說明 -->
    <label>
      總樓層
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">所在樓層/總樓層數</span>
      </span>
      ：<input name="floor" class="auto-grow" required>
    </label>
    <!-- 建物型態加說明 -->
    <label>
      建物型態
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">前面為房間型態（分套、獨套、雅房）/後面為大樓的型態（公寓、電梯大樓、透天厝）</span>
      </span>
      ：<input name="type" class="auto-grow" required>
    </label>
    <!-- 坪數加說明 -->
    <label>
      坪數
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">房內坪數（如為獨立套房/整層需調閱謄本） 頂加不用調</span>
      </span>
      ：<input name="area" class="auto-grow" required>
    </label>
    <!-- 格局 -->
    <label>
      格局
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">請依現況格局如實填寫，若未如實填寫，後續若致生爭議，須自行負責！</span>
      </span>
      ：
      <div class="inline-scroll">
        <input type="text" name="layout_room" class="small-input" maxlength="2" placeholder="房">房
        <input type="text" name="layout_living" class="small-input" maxlength="2" placeholder="廳">廳
        <input type="text" name="layout_bath" class="small-input" maxlength="2" placeholder="衛浴">衛浴
        <input type="text" name="layout_kitchen" class="small-input" maxlength="2" placeholder="廚房">廚房
        <input type="text" name="layout_balcony" class="small-input" maxlength="2" placeholder="陽台">陽台
        <input type="checkbox" name="layout_option" value="開放式">開放式
        <input type="checkbox" name="layout_option" value="樓中樓">樓中樓
      </div>
    </label>
    <!-- 租金 -->
    <label>租金：<input name="rent" class="auto-grow" required></label>
    <!-- 管理費加說明，無選項在空白格後方 -->
    <label>
      管理費
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有無管理費用（若有請註記包含哪些費用ex:水費、瓦斯費、第四台費用、網路費用、垃圾代收)</span>
      </span>
      ：<input name="fee" class="auto-grow" required>
      <input type="radio" name="fee_none" value="無">無
    </label>
    <!-- 底價 -->
    <label>底價：<input name="base" class="auto-grow" required></label>
    <!-- 報稅加說明 -->
    <label>
      報稅
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">(可否讓租客申請報稅/公證)</span>
      </span>
      ：
      <div class="inline-scroll">
        <input type="radio" name="tax" value="可" id="tax_yes_radio">可
        <input type="text" id="tax_yes_text" name="tax_yes_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
        <input type="radio" name="tax" value="不可">不可
        <input type="checkbox" name="tax_other" value="其他" id="tax_other_checkbox">其他
        <input type="text" id="tax_other_text" name="tax_other_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
      </div>
    </label>
    <!-- 租補 -->
    <label>租補：
      <div class="inline-scroll">
        <input type="radio" name="subsidy" value="可" id="subsidy_yes_radio">可
        <input type="text" id="subsidy_yes_text" name="subsidy_yes_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
        <input type="radio" name="subsidy" value="不可">不可
        <input type="checkbox" name="subsidy_other" value="其他" id="subsidy_other_checkbox">其他
        <input type="text" id="subsidy_other_text" name="subsidy_other_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
      </div>
    </label>
    <!-- 入籍 -->
    <label>入籍：
      <div class="inline-scroll">
        <input type="radio" name="register" value="可" id="register_yes_radio">可
        <input type="text" id="register_yes_text" name="register_yes_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
        <input type="radio" name="register" value="不可">不可
        <input type="checkbox" name="register_other" value="其他" id="register_other_checkbox">其他
        <input type="text" id="register_other_text" name="register_other_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
      </div>
    </label>
    <!-- 寵物 -->
    <label>寵物：
      <div class="inline-scroll">
        <input type="checkbox" name="pet" value="可寵">可寵
        <input type="checkbox" name="pet" value="可寵(可談)">可寵(可談)
        <input type="checkbox" name="pet" value="可貓">可貓
        <input type="checkbox" name="pet" value="可狗">可狗
        <input type="checkbox" name="pet" value="其他" id="pet_other_checkbox">其他
        <input type="text" id="pet_other_text" name="pet_other" placeholder="請輸入其他內容" style="display:none;" size="8">
      </div>
    </label>
    <!-- 垃圾代收加說明 -->
    <label>
      垃圾代收
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有無垃圾袋收，有的話是否需要專用垃圾袋</span>
      </span>
      ：<input name="garbage" class="auto-grow" required>
    </label>
    <!-- 停車位 -->
    <label>
      停車位
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有沒有停車位（在哪、停車位形式、計費方式皆需問清楚）讓行銷人員好介紹機械 平面 高度寬度</span>
      </span>
      ：
      <div class="inline-scroll">
        <input type="radio" name="parking" value="有" id="parking_yes_radio">有
        <input type="text" id="parking_yes_text" name="parking_yes_text" class="auto-grow" placeholder="備註" style="display:none;" size="8">
        <input type="radio" name="parking" value="無">無
        <input type="checkbox" name="parking_other" value="機械">機械
        <input type="checkbox" name="parking_other" value="平面">平面
        <input type="checkbox" name="parking_other" value="其他">其他
      </div>
    </label>
    <!-- 公設 -->
    <label>
      公設
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有些分套可能會有飲水機等等，這些都可以註記，社區大樓有什麼樣的公設也可以註記 健身房 會議室 游泳池 桌球撞球室 KTV 花園等</span>
      </span>
      ：<input name="public" class="auto-grow" placeholder="請填寫公設內容">
    </label>
    <!-- 電費 -->
    <label>
      電費$/度
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">電費一度費用為多少？夏季非夏季計費有無不同?若房東說帳單請標註：台電帳單</span>
      </span>
      ：<input name="electric" class="auto-grow" required>
    </label>
    <!-- 水費 -->
    <label>
      水費
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有無用水之費用，有的話金額為多少 超過多少度 收多少錢等等，若房東說帳單請標註：台水帳單</span>
      </span>
      ：<input name="water" class="auto-grow" required>
    </label>
    <!-- 瓦斯 -->
    <label>
      瓦斯
      <span class="tooltip">
        <a href="javascript:void(0);" class="tip-link" onclick="showTip(this)">說明</a>
        <span class="tip-content">有無瓦斯爐（是否能開火、還是不能用明火，可用電磁爐，請另外標註天然瓦斯或是瓦斯桶，瓦斯桶不可勾天然瓦斯)</span>
      </span>
      ：<input name="gas" class="auto-grow" required>
    </label>
    <label>鄰近交通(站點/分鐘)：<input name="traffic" class="auto-grow" required></label>
    <label>帶看方式：<input name="show" class="auto-grow" required></label>
    <label>附加設備：<textarea name="equip" class="square-textarea" required></textarea></label>
    <label>注意事項(生活機能、東服等補充)：<textarea name="note" class="square-textarea" required></textarea></label>
    <label>開發：<input name="dev" class="auto-grow" required></label>
    <button type="button" onclick="generate()">產生格式</button>
    <button type="button" onclick="copyText()">複製內容</button>
  </form>
  <textarea id="output" readonly placeholder="這裡會自動產生格式內容" oninput="autoGrow(this)"></textarea>

  <script>
    // 手機友善說明提示
    function showTip(link) {
      document.querySelectorAll('.tooltip.show').forEach(function(tip){
        if (tip !== link.parentNode) tip.classList.remove('show');
      });
      link.parentNode.classList.toggle('show');
    }
    document.addEventListener('click', function(e){
      if (!e.target.classList.contains('tip-link')) {
        document.querySelectorAll('.tooltip.show').forEach(function(tip){
          tip.classList.remove('show');
        });
      }
    });

    // 讓所有 .auto-grow input 根據內容自動變長
    function adjustInputWidth(input) {
      let span = document.getElementById('width-tester');
      if (!span) {
        span = document.createElement('span');
        span.id = 'width-tester';
        span.style.visibility = 'hidden';
        span.style.position = 'absolute';
        span.style.whiteSpace = 'pre';
        span.style.font = window.getComputedStyle(input).font;
        document.body.appendChild(span);
      }
      span.textContent = input.value || input.placeholder || '';
      input.style.width = Math.max(120, span.offsetWidth + 20) + 'px';
    }
    document.querySelectorAll('.auto-grow').forEach(function(input) {
      input.addEventListener('input', function() {
        adjustInputWidth(this);
      });
      adjustInputWidth(input);
    });
    document.querySelectorAll('input[type="text"]').forEach(function(input) {
      input.addEventListener('input', function() {
        adjustInputWidth(this);
      });
    });

    // 讓產生格式的 textarea 自動變高
    function autoGrow(element) {
      element.style.height = "5px";
      element.style.height = (element.scrollHeight) + "px";
    }

    // 自動產生民國日期
    function getTaiwanDate() {
      const today = new Date();
      const year = today.getFullYear() - 1911;
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const day = String(today.getDate()).padStart(2, '0');
      return `${year}/${month}/${day}`;
    }
    document.getElementById('date').value = getTaiwanDate();

    // ...（其餘JS請用你之前的完整表單內容）...
  </script>
</body>
</html>
